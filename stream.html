<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streaming Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-200 flex flex-col items-center justify-center min-h-screen p-6">

    <h2 id="movieTitle" class="text-2xl font-bold mb-4 text-gray-100">Loading...</h2>
    <iframe id="streamFrame" class="w-full max-w-3xl h-[500px] rounded-lg border border-gray-700"></iframe>

    <script>
        const TMDB_API_KEY = "YOUR_TMDB_API_KEY";  

        function getQueryParam(param) {
            let urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        let tmdbId = getQueryParam("tmdbId");
        let type = getQueryParam("type");
        let season = getQueryParam("season");
        let episode = getQueryParam("episode");
        let provider = getQueryParam("provider") || "vidsrc.cc";

        async function fetchMovieTitle() {
            let apiUrl = type === "series"
                ? `https://api.themoviedb.org/3/tv/${tmdbId}?api_key=${TMDB_API_KEY}`
                : `https://api.themoviedb.org/3/movie/${tmdbId}?api_key=${TMDB_API_KEY}`;

            try {
                let response = await fetch(apiUrl);
                let data = await response.json();
                document.getElementById("movieTitle").textContent = `Now Streaming: ${data.title || data.name}`;
            } catch (error) {
                document.getElementById("movieTitle").textContent = "Title Not Found";
            }
        }

        if (tmdbId) {
            fetchMovieTitle();
            let embedUrl = type === "series" 
                ? `https://${provider}/embed/tv/${tmdbId}/${season}/${episode}`
                : `https://${provider}/embed/${tmdbId}`;
            document.getElementById("streamFrame").src = embedUrl;
        } else {
            document.body.innerHTML = "<h2 class='text-red-500 text-center'>Error: No TMDb/IMDb ID provided</h2>";
        }
    </script>

</body>
</html>
